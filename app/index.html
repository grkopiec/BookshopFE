<!DOCTYPE html>
<html ng-app="bookshop">
	<head>
		<meta charset="UTF-8">
		<link href="style.css" rel="stylesheet" />
		<title>Bookshop</title>
		<base href="/">
	</head>
	<body ng-controller="navbarController as navbarCtrl">

		<nav class="navbar navbar-default" role="navigation">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#nav-toggle">
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
			</div>
			<div id="nav-toggle" class="collapse navbar-collapse">
				<ul class="nav navbar-nav">
					<li ui-sref-active="active">
						<a ui-sref="home" href="">Home</a>
					</li>
					<li ui-sref-active="active">
						<a ui-sref="products" href="">Products</a>
					</li>
					<li ng-if="navbarCtrl.angular.equals({}, navbarCtrl.userService.user) === false
									&& navbarCtrl.userService.user.roles.includes('ROLE_ADMIN') === true"
							ui-sref-active="active">
						<a ui-sref="cms" href="">Manage</a>
					</li>
				</ul>
				<!-- TODO quick search from navbar -->
<!-- 				<form class="navbar-form navbar-right" role="search">
					<input type="text" class="form-control" placeholder="Search" ng-model="search.name" ng-keyup="startSearch()" />
				</form> -->
 				<ul class="nav navbar-nav navbar-right">
					<li ng-if="navbarCtrl.angular.equals({}, navbarCtrl.userService.user) === true" ui-sref-active="active">
						<a ui-sref="login" href="">Login</a>
					</li>
					<li ng-if="navbarCtrl.angular.equals({}, navbarCtrl.userService.user) === true" ui-sref-active="active">
						<a ui-sref="register" href="">Register</a>
					</li>
					<li ng-if="navbarCtrl.angular.equals({}, navbarCtrl.userService.user) === false">
						<p class="navbar-text">
							Loged as <strong ng-bind="navbarCtrl.userService.user.username"></strong>
						</p>
					</li>
					<li ng-if="navbarCtrl.angular.equals({}, navbarCtrl.userService.user) === false
									&& navbarCtrl.userService.user.roles.includes('ROLE_ADMIN') === false"
							ui-sref-active="active">
						<a ui-sref="user-panel" href="">Manage account</a>
					</li>
					<li ng-if="navbarCtrl.angular.equals({}, navbarCtrl.userService.user) === false">
						<a ng-click="navbarCtrl.logout()" href="">Logout</a>
					</li>
				</ul>
			</div>
		</nav>
	
		<ui-view></ui-view>
		
 		<script type="text/javascript" src="bookshop.js"></script>
	</body>
</html>